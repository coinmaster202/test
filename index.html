<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>One Two Gmail Tool</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    /* [Same styling as before... no change needed for this feature] */
  </style>
</head>
<body>
<header>
  <h1>One Two Gmail Tool</h1>
  <button id="theme-toggle" title="Toggle light/dark theme">Dark Mode</button>
  <div id="user-location">Detecting location...</div>
</header>
<main>
  <div class="tabs">
    <div class="tab active-tab" onclick="switchTab('gmail-gen')">Gmail Generator</div>
    <div class="tab" onclick="switchTab('email-csv')">Convert to CSV</div>
    <div class="tab" id="dup-tab" onclick="switchTab('check-dup')" style="display: none;">Check Duplicates</div>
  </div>

  <section id="gmail-gen" class="content active-content">
    <!-- [No changes here, assume previous Gmail Generator UI] -->
  </section>

  <section id="email-csv" class="content">
    <!-- [Convert to CSV content remains unchanged] -->
  </section>

  <!-- ✅ NEW: Duplicate Checker Section -->
  <section id="check-dup" class="content">
    <textarea id="dup-list" rows="6" placeholder="Paste emails here..."></textarea>
    <button onclick="checkDuplicates()">Check for Duplicates</button>
    <div id="dup-results" style="margin-top: 15px;"></div>
  </section>
</main>
<footer>
  <p>&copy; 2025 One Two Gmail Tool</p>
</footer>

<script>
  let masterAccess = false;
  let latestVariations = [];

  function switchTab(tab) {
    document.querySelectorAll(".content").forEach(c => c.classList.remove("active-content"));
    document.querySelectorAll(".tab").forEach(t => t.classList.remove("active-tab"));
    document.getElementById(tab).classList.add("active-content");
    const tabs = ["gmail-gen", "email-csv", "check-dup"];
    tabs.forEach((t, i) => {
      if (tab === t) document.querySelectorAll(".tab")[i].classList.add("active-tab");
    });
  }

  document.getElementById("access-btn").onclick = () => {
    const code = document.getElementById("access-code").value.trim();
    const select = document.getElementById("variation-count");

    if (code === "2025") {
      masterAccess = true;
      select.innerHTML = `<option selected disabled>Unlimited (Master)</option>`;
      select.disabled = true;
      document.getElementById("dup-tab").style.display = "block";
    } else if (code === "1234") {
      masterAccess = false;
      select.innerHTML = [5, 10, 15, 20].map(n => `<option value="${n}">${n}</option>`).join("");
      select.disabled = false;
      document.getElementById("dup-tab").style.display = "none";
    } else {
      alert("Invalid access code.");
      return;
    }

    document.getElementById("generator-section").style.display = "block";
    document.getElementById("username").focus();
  };

  function checkDuplicates() {
    const input = document.getElementById("dup-list").value.trim();
    const emails = input
      .split(/[\s,\n]+/)
      .map(e => e.trim().toLowerCase())
      .filter(e => e.includes("@"));

    const map = new Map();
    emails.forEach(e => map.set(e, (map.get(e) || 0) + 1));

    const duplicates = [...map.entries()].filter(([email, count]) => count > 1);
    const output = document.getElementById("dup-results");

    if (duplicates.length === 0) {
      output.innerHTML = `<p style="color:green;">No duplicates found!</p>`;
    } else {
      output.innerHTML = `<p style="color:red;"><strong>Duplicate Emails:</strong></p><ul>` +
        duplicates.map(([email, count]) => `<li>${email} — ${count} times</li>`).join("") + `</ul>`;
    }
  }

  // [Insert remaining JavaScript logic here: theme toggle, username validation, Gmail generator, CSV converter, etc.]

  // IP Location
  fetch("https://ipapi.co/json")
    .then(res => res.json())
    .then(data => {
      const locationText = `${data.city || ''}, ${data.region || ''}, ${data.country_name || ''}`;
      document.getElementById("user-location").textContent = `Location: ${locationText}`;
    })
    .catch(() => {
      document.getElementById("user-location").textContent = "Location unavailable";
    });
</script>
</body>
</html>